/* src/assets/css/dashboard.css */

/* 1. 頁面容器 */
.dashboard-container {
    padding: 24px;
    max-width: 1400px;
    margin: 0 auto;
    /* 背景改為變數，若要漸層效果，可定義專屬的 --bg-dashboard-gradient */
    /* 這裡暫時用 --bg-body 以確保深色模式一致性 */
    background: var(--bg-body); 
    min-height: 100vh;
}

/* 2. 標題區域 */
.page-header {
    margin-bottom: 32px;
}

.page-title {
    font-size: 32px;
    font-weight: 700;
    color: var(--text-primary); /* 原本 #1e293b */
    margin: 0 0 8px 0;
}

.page-subtitle {
    font-size: 14px;
    color: var(--text-secondary); /* 原本 #64748b */
    margin: 0;
}

/* 3. 頂部總覽卡片區 (Overview Grid) */
.overview-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-bottom: 32px;
}

.stat-card {
    background: var(--bg-card); /* 原本 white */
    border-radius: 16px;
    padding: 24px;
    box-shadow: var(--shadow-card); /* 原本 0 2px 8px... */
    border-left: 4px solid;
    transition: transform 0.2s, box-shadow 0.2s;
    /* 補上邊框讓深色模式更清晰 */
    border: 1px solid var(--border-color); 
    border-left-width: 4px; /* 恢復左邊框寬度 */
}

.stat-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08);
}

/* 各種卡片顏色定義 (這些是功能色，通常不隨主題變，或微調明度) */
.income-card { border-left-color: var(--color-primary); } /* 原本 #3b82f6 */
.expense-card { border-left-color: var(--color-danger); } /* 原本 #ef4444 */
.balance-card { border-left-color: var(--text-secondary); } /* 原本 #434f55 (用灰色系替代) */

.card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.card-title {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-secondary); /* 原本 #64748b */
}

.icon {
    width: 20px;
    height: 20px;
    stroke-width: 2;
}

/* icon 顏色跟隨卡片主題 */
.income-card .icon { color: var(--color-primary); }
.expense-card .icon { color: var(--color-danger); }
.balance-card .icon { color: var(--text-secondary); }

.card-content .amount {
    font-size: 28px;
    font-weight: 700;
    color: var(--text-primary); /* 原本 #000000 */
    margin-bottom: 4px;
}

.change-text {
    font-size: 12px;
    color: var(--text-secondary); /* 原本 #64748b */
    margin: 0;
}

/* 4. 主要內容網格 (Content Grid) */
.content-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 24px;
    margin-bottom: 32px;
}

.bottom-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 24px;
}

@media (max-width: 1024px) {
    .bottom-grid {
        grid-template-columns: 1fr;
    }
}

/* 5. 通用卡片樣式 */
.card {
    background: var(--bg-card); /* 原本 white */
    border-radius: 16px;
    padding: 24px;
    box-shadow: var(--shadow-card);
    border: 1px solid var(--border-color); /* 補上邊框 */
}

.card-inner-header {
    margin-bottom: 20px;
    align-items: center;
}

.card-inner-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary); /* 原本 #1e293b */
    margin: 0 0 4px 0;
    text-align: center;
}

.card-description {
    font-size: 13px;
    color: var(--text-secondary); /* 原本 #94a3b8 */
    margin: 0;
    text-align: center;
}

/* 搜尋框 */
.search-box {
    width: 100%;
    max-width: 400px;
    position: relative;
    display: flex;
    justify-content: center;
    margin: 0 auto;
}

.search-input {
    margin-top: 10px;
    text-align: center;
    border: 1px solid var(--border-color); /* 原本 #e4e7ed */
    border-radius: 25px;
    font-size: 0.95rem;
    transition: all 0.3s ease;
    background-color: var(--bg-input); /* 原本 #f8f9fb */
    color: var(--text-primary);
    outline: none;
    padding: 8px 16px;
}

.card-body {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

/* 6. 帳戶列表 (Account List) */
.accounts-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

/* 帳戶類型標題區塊 */
.account-type-section {
    margin-bottom: 24px;
}

.group-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding: 0 4px;
}

/* 類型標籤 (Badge) */
.type-badge {
    font-size: 14px;
    font-weight: 700;
    color: var(--text-primary); /* 原本 #475569 */
    border-left: 4px solid var(--color-primary); /* 原本 #3b82f6 */
    padding-left: 10px;
}

.type-count {
    font-size: 11px;
    color: var(--text-secondary); /* 原本 #94a3b8 */
}

span.type-badge.frequent {
  color: var(--text-secondary);
}

/* 隊友新增的 Badge 樣式 (微調以適應 dark mode) */
.type-badge.frequent {
    background: var(--bg-card); /* 原本 #eef2ff */
    color: var(--color-primary); /* 原本 #4f46e5 */
    border:none;
    padding: 4px 8px; /* 補上 padding 讓它像個 badge */
    border-radius: 6px;
    border-left: none; /* 移除左邊框改用全框 */
}

span.type-badge.recent{
  color: var(--text-secondary);
}

.type-badge.recent {
    background: var(--bg-card); /* 原本 #f0fdf4 */
    color: var(--color-success); /* 原本 #16a34a */
    border: none;
    padding: 4px 8px;
    border-radius: 6px;
    border-left: none;
}



/* 單個帳戶項目 */
.account-row-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--bg-body); /* 原本 #f8fafc */
    border-radius: 16px;
    padding: 16px 20px;
    margin-bottom: 8px;
    transition: transform 0.2s;
    border: 1px solid var(--border-color); /* 增加層次感 */
}

.account-row-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    background: var(--bg-hover);
}

.acc-main-info {
    display: flex;
    align-items: center;
    gap: 16px;
}

.acc-icon-box {
    width: 48px;
    height: 48px;
    background: var(--bg-card); /* 原本 #e2e8f0 */
    border: 1px solid var(--border-color);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
}

.acc-name-text {
    font-weight: 600;
    color: var(--text-primary); /* 原本 #1e293b */
    font-size: 16px;
}

.acc-currency-text {
    font-size: 12px;
    color: var(--text-secondary); /* 原本 #64748b */
}

.acc-balance-display {
    font-size: 18px;
    font-weight: 700;
    color: var(--text-primary); /* 原本 #1e293b */
}

.acc-balance-display.is-negative {
    color: var(--color-danger); /* 原本 #ef4444 */
}

.exclude-mini-tag {
    font-size: 10px;
    background: var(--bg-hover); /* 原本 #e2e8f0 */
    padding: 1px 5px;
    border-radius: 4px;
    color: var(--text-secondary); /* 原本 #64748b */
    margin-left: 5px;
}

.empty-type-msg {
    text-align: center;
    font-size: 12px;
    color: var(--text-secondary); /* 原本 #cbd5e1 */
    padding: 10px;
    border: 1px dashed var(--border-color); /* 原本 #e2e8f0 */
    border-radius: 12px;
}

/* 7. 預算列表 (Budgets) */
.budgets-list {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.budget-item {
    margin-bottom: 20px;
}

.budget-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.budget-category {
    font-weight: 600;
    color: var(--text-primary); /* 原本 #1e293b */
    display: flex;
    align-items: center;
    gap: 6px;
}

.budget-amounts {
    font-size: 13px;
    color: var(--text-secondary); /* 原本 #64748b */
}

.progress-bar {
    width: 100%;
    height: 10px;
    background: var(--bg-hover); /* 原本 #f1f5f9 */
    border-radius: 5px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.progress-primary { 
    background: var(--color-primary);
}
.progress-warning { 
    background: var(--color-warning);
}
.progress-danger { 
    background: var(--color-danger);
}

.budget-footer {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    margin-top: 8px;
    color: var(--text-secondary); /* 原本 #94a3b8 */
    opacity: 1;
}

.budget-footer span {
    /* 預設讓所有 span 都繼承父層顏色 */
    color: inherit;
}

.text-danger {
    color: var(--color-danger) !important;
    font-weight: bold;
}

.text-link {
  color: var(--color-primary); 
  font-weight: 700;
  text-decoration: underline;
  cursor: pointer;
  transition: all 0.2s ease;
  font-style: normal;
}

.text-link:hover {
  filter: brightness(1.2);
  text-decoration: none;
  transform: translateY(-1px);
}

.text-muted {
    /* 1. 改用 Primary 文字色，確保亮度足夠 */
    color: var(--text-primary) !important;
    
    /* 2. 移除任何透明度設定，防止背景色透上來 */
    opacity: 1 !important; 
    
    /* 3. 使用斜體與稍微加粗，維持「這是一條提示」的語義 */
    font-style: italic;
    font-weight: 500;
    
    /* 4. 微弱的亮度調降，模擬 muted 感但保持對比 */
    filter: brightness(0.9);
}

[data-theme="dark"] .text-muted {
    color: var(--text-primary);
    filter: brightness(0.8); /* 稍微調暗 primary，使其維持 'muted' 感但保持高對比 */
}

/* --- 進度條底色 (預算為 0 或未填寫時) --- */
.bg-gray {
    background-color: var(--bg-progress-empty);
    transition: background-color 0.3s ease;
}

/* 8. 交易紀錄列表 (Transactions) */
.transactions-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.transaction-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px;
    border-radius: 10px;
    transition: background 0.2s;
    border-bottom: 1px solid var(--border-color); /* 增加分隔線 */
}

.transaction-item:hover {
    background: var(--bg-hover); /* 原本 #f8fafc */
}

.transaction-info {
    display: flex;
    align-items: center;
    gap: 12px;
}

.transaction-icon {
    width: 36px;
    height: 36px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* 交易圖示顏色 (使用半透明背景) */
.transaction-icon.income { 
    background: rgba(16, 185, 129, 0.1); 
    color: var(--color-success); 
}
.transaction-icon.expense { 
    background: rgba(239, 68, 68, 0.1); 
    color: var(--color-danger); 
}
.transaction-icon.transfer {
    background: rgba(59, 130, 246, 0.1);
    color: var(--color-primary);
}

.transaction-name {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary); /* 原本 #1e293b */
}

.transaction-category {
    font-size: 12px;
    color: var(--text-secondary); /* 原本 #94a3b8 */
    display: flex;
    align-items: center;
    gap: 4px;
}

.transaction-details {
    text-align: right;
}

.transaction-amount {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary); /* 原本 #1e293b */
}

.transaction-amount.income { color: var(--color-success); }
.transaction-amount.expense { color: var(--text-primary); /* 支出通常顯示黑色或跟隨主題 */ }

.transaction-date {
    font-size: 12px;
    color: var(--text-secondary); /* 原本 #94a3b8 */
}

/* 9. 通知列表 (Notifications) */
.notifications-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.notification-item {
    padding: 14px;
    border-radius: 10px;
    border: 1px solid;
    display: flex;
    gap: 12px;
}

/* 通知的背景保持半透明，但在深色模式下可能需要調整透明度 */
.notification-item.warning {
    background: rgba(14, 165, 233, 0.05);
    border-color: rgba(14, 165, 233, 0.2);
}
.notification-item.warning .notification-icon { stroke: #0ea5e9; }

.notification-item.success {
    background: rgba(16, 185, 129, 0.05);
    border-color: rgba(16, 185, 129, 0.2);
}
.notification-item.success .notification-icon { stroke: #10b981; }

.notification-item.info {
    background: rgba(100, 116, 139, 0.05);
    border-color: rgba(100, 116, 139, 0.2);
}
.notification-item.info .notification-icon { stroke: var(--text-secondary); }

.notification-title {
    font-size: 13px;
    font-weight: 500;
    color: var(--text-primary); /* 原本 #1e293b */
    margin-bottom: 4px;
}

.notification-text {
    font-size: 12px;
    color: var(--text-secondary); /* 原本 #64748b */
    margin: 0;
}

/* 10. 分頁按鈕 */
.pagination-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    margin-top: 20px;
    padding: 10px;
}

.page-btn {
    padding: 8px 16px;
    border: 1px solid var(--border-color); /* 原本 #e0e0e0 */
    background: var(--bg-card); /* 原本 #ffffff */
    color: var(--text-primary); /* 原本 #606266 */
    border-radius: 20px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.page-btn:hover:not(:disabled) {
    background: var(--color-primary); /* 原本 #409eff */
    color: var(--text-inverse); /* 原本 white */
    border-color: var(--color-primary);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(64, 158, 255, 0.3);
}

.page-btn:disabled {
    background: var(--bg-hover); /* 原本 #f5f7fa */
    color: var(--text-secondary); /* 原本 #c0c4cc */
    cursor: not-allowed;
    box-shadow: none;
}

.page-info {
    font-size: 14px;
    color: var(--text-secondary); /* 原本 #909399 */
    font-family: 'Inter', sans-serif;
}